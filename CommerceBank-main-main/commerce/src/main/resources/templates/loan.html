<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <title>Loan</title>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css" />
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Font+Name&display=swap">


    <style>

        footer {
            text-align: right;
            background-color: rgba(255,255,255,0.75);
            color: #000000;
            padding: 20px;
            margin-top: auto;
        }

        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: 'Font Name', sans-serif;
            padding-top: 100px; /* Adjust as needed */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .background-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://t4.ftcdn.net/jpg/07/03/80/39/360_F_703803915_lCTLu5geWkfuIVOv5DyYV6V2l7WGJvDY.jpg');
            background-size: cover;
            background-position: top;
            z-index: -1;
        }
        main {
            width: 90vw;
            margin: 0 auto;
            padding: 30px 20px;
            min-height: calc(100vh - 211px - 58px);
            z-index: 1; /* Ensure navbar stays above other content */
        }




        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropbtn {
            background-color: #007bff;
            color: white;
            padding: 10px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin: 0 auto;

        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #ddd;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #0056b3;
        }

        .dropdown-wrapper {
            display: inline-block;
            flex-direction: column;
            align-items: flex-start;
            margin-right: 20px; /* Adjust margin as needed to create space between dropbtn and info-boxes */
        }


        .mortgage-result {
            width: 100%;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
            line-height: 1.5;
            resize: vertical; /* Allow vertical resizing */
            min-height: 150px; /* Set minimum height */
            overflow-y: auto; /* Enable vertical scrollbar if needed */
        }

        /* Additional CSS styles for the input fields */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }

        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #0056b3;
        }

        h1 {
            color: #A3A502;
            margin-bottom: 30px;
        }
        h2 {
            color: #006747;
            margin-bottom: 30px;
        }
        h3 {
            color: #006747;
            margin-bottom: 30px;
            margin: 20px 0
        }
        a {
            color: #FFFFFF;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        a:hover, a:focus {
            color: #FFFFFF;
            text-decoration: underline;
        }
        .top-left {
            position: absolute;
            top: 0;
            right: 0;
            margin: 3px;
        }
        /* Navbar styling */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: rgba(255,255,255,0.85);
            border-radius: 0;
            z-index: 1000; /* Ensure navbar stays above other content */
        }
        .navbar-brand, .navbar-nav .nav-link {
            color: #FFFFFF;
        }
       .navbar-brand:hover, .navbar-nav .nav-link:hover {
           color: #a3bd8c !important;
       }
        nav a {
            color: #006747 !important;
            font-size: 20px !important;
            font: courier !important;
        }
        nav li a {
            color: #006747 !important;
            font-size: 20px !important;
            font: courier !important;
        }
        nav li button{
            color: #006747 !important;
            font-size: 20px !important;
            font: courier !important;
        }
        .nav-item {
            color: #006747 !important;
            font-size: 20px !important;
            font: courier !important;
        }
        .icon-image {
            max-height: 50px; /* Adjust based on your image's size */
            width: auto;
        }

        .container-left {
            width: 60%;
            float: left;
            padding-right: 20px;
            z-index: 1; /* Ensure navbar stays above other content */
        }

        .container-right {
            margin-top: 20px;
            width: 40%;
            float: left;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 40px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            z-index: 1; /* Ensure navbar stays above other content */
        }

        /* Added CSS for responsive layout */
        @media (max-width: 768px) {
            .container-left, .container-right {
                width: 100%;
                float: none;
            }
        }

        .info-box {
            text-align: center;
            margin-top: 20px; /* Increased space between info-boxes and dropdown */
            margin-bottom: 50px; /* Increased space between info-boxes */
            padding: 15px; /* Add padding for better spacing */
            font-size: 18px; /* Increase font size */
            font-family: Arial, sans-serif; /* Change font family to something nicer */
            background-color: #f0f0f0; /* Add a background color for better contrast */
            border-radius: 8px; /* Add rounded corners for a softer look */
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* Add a subtle shadow for depth */
            transition: all 0.3s ease; /* Add a smooth transition effect */
        }


        .info-box:hover {
            transform: translateY(-5px); /* Add a slight upward hover effect */
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1); /* Increase shadow on hover */
        }
        .mortgage-title {
            display: inline-flex;
            align-items: center; /* Aligns image and text vertically */
        }

        .mortgage-title img {
            width: 1.3em;
            height: 1.3em;
            margin-right: 5px;
        }

        .auto-title {
            display: inline-flex;
            align-items: center;
        }

        .auto-title img {
            width: 2.0em;
            height: 2.0em;
            margin-right: 5px;
        }

        .student-title {
            display: inline-flex;
            align-items: center;
        }

        .student-title img {
            width: 2.0em;
            height: 2.0em;
            margin-right: 5px;
        }

        main {
            flex: 1;
        }
    </style>
</head>
<div class="background-image"></div>



<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <form th:action="@{/loan}" method="get">
            <a href="javascript:;" onclick="this.closest('form').submit();">
                <img src="https://epicci.org/wp-content/uploads/2019/02/commerce-bank-logo-2x.png" alt="Commerce Bank Logo" class="icon-image" style="border: none; outline: none;">
            </a>
        </form>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link"  th:href="@{/dash_board}"><b>Home</b></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/transfer}"><b>Transfer Funds</b></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/loan}"><b>Loan Manager</b></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/budget}"><b>Budgeting</b></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/settings}"><b>User Settings</b></a>
                </li>
                <li class="nav-item">
                    <form th:action="@{/logout}" method="post" >
                        <button type="submit" class="nav-link" style="background: none; border: none; padding: 8px; font: inherit; cursor: pointer;"><b>Sign Out</b></button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>


<body>

<main>
    <div class="container-left">
        <div class="info-box" id="mortgageInfoBox">
            <b class="mortgage-title"><img src="https://png.pngtree.com/png-vector/20221108/ourmid/pngtree-cartoon-house-illustration-png-image_6434928.png" alt="House Icon"> MORTGAGE</b><br>
            A mortgage loan is a financial product designed to help individuals purchase homes. It involves borrowing money from a lender to cover the cost of a property, with repayment typically spread over 15 to 30 years. The loan amount is determined by factors such as the home price and down payment, while the interest rate, based on factors like credit score and market conditions, determines the cost of borrowing. Monthly mortgage payments consist of both principal (the borrowed amount) and interest.
            For example, a $300,000 home with a 20% down payment of $60,000 and a 30-year fixed-rate mortgage at 4% interest would result in monthly payments calculated based on these factors.
        </div>

        <div class="info-box" id="autoInfoBox">
            <b class="auto-title"><img src="https://png.pngtree.com/png-clipart/20190604/original/pngtree-car-sets-png-image_1291357.jpg" alt="Auto Icon"> AUTO</b><br>
            An auto loan is a financing option that assists individuals in purchasing vehicles.
            It involves borrowing money from a lender, typically repaid over 3 to 7 years. The loan amount, influenced by factors like the vehicle's price and trade-in value, is subject to an interest rate determined by creditworthiness and market conditions. Monthly payments encompass both principal and interest, with additional costs like sales tax and fees included.
            This makes vehicle ownership accessible over time, with considerations for trade-in value, down payment, and sales tax rate factored into the overall financing equation.

        </div>
        <div class="info-box" id="studentInfoBox">
            <!-- Content related to student loan will be displayed here -->
            <b class="student-title"><img src="https://png.pngtree.com/element_our/20190602/ourmid/pngtree-stacking-cartoon-books-image_1420721.jpg" alt="Stud Icon"> STUDENT</b><br>
            A student loan is a financial tool that assists individuals in funding their education. It involves borrowing money from a lender,
            typically repaid after leaving school. The loan amount, term, and interest rate vary based on factors such as the borrower's financial need and creditworthiness.
            Repayment plans may span over several years, with monthly payments covering both principal and interest.
            This makes higher education accessible, with considerations for loan amount, term, and interest rate shaping the overall financing arrangement.

        </div>
    </div>
    </div>

    <div class="container-right">
        <div class="dropdown-wrapper">
            <div class="dropdown">
                <button class="dropbtn">Select a Loan Type</button>
                <div class="dropdown-content">
                    <a href="#" onclick="showMortgageForm()">Mortgage Loan</a>
                    <a href="#" onclick="showAutoForm()">Auto Loan</a>
                    <a href="#" onclick="showStudentLoanForm()">Student Loan</a>
                </div>
            </div>
        </div>


        <div id="mortgageForm" style="display: none;">
            <div class="form-group">
                <label for="homePrice">Home Price:</label>
                <input type="text" id="homePrice" name="homePrice">
            </div>
            <div class="form-group">
                <label for="downPayment">Down Payment:</label>
                <input type="text" id="downPayment" name="downPayment">
            </div>
            <div class="form-group">
                <label for="loanTerm">Loan Term (years):</label>
                <input type="text" id="loanTerm" name="loanTerm">
            </div>
            <div class="form-group">
                <label for="interestRate">Interest Rate (%):</label>
                <input type="text" id="interestRate" name="interestRate">
            </div>
            <button onclick="calculateMortgage()">Calculate Mortgage</button>
            <div id="mortgageResult" class="mortgage-result"></div>

        </div>

        <div id="studentLoanForm" style="display: none;">
            <div class="form-group">
                <label for="loanAmount">Loan Amount:</label>
                <input type="text" id="loanAmount" name="loanAmount">
            </div>
            <div class="form-group">
                <label for="loanTermYears">Loan Term (years):</label>
                <input type="text" id="loanTermYears" name="loanTermYears">
            </div>
            <div class="form-group">
                <label for="interestRate2">Interest Rate (%):</label>
                <input type="text" id="interestRate2" name="interestRate2">
            </div>
            <button onclick="calculateStudentLoan()">Calculate Student Loan</button>
            <div id="studentLoanResult"></div>
        </div>

        <div id="autoLoanForm" style="display: none;">
            <div class="form-group">
                <label for="loanAmountAuto">Loan Amount:</label>
                <input type="text" id="loanAmountAuto" name="loanAmountAuto">
            </div>
            <div class="form-group">
                <label for="loanTermYearsAuto">Loan Term (years):</label>
                <input type="text" id="loanTermYearsAuto" name="loanTermYearsAuto">
            </div>
            <div class="form-group">
                <label for="interestRateAuto">Interest Rate (%):</label>
                <input type="text" id="interestRateAuto" name="interestRateAuto">
            </div>
            <!-- Additional input fields for auto loan -->
            <div class="form-group">
                <label for="tradeInValue">Trade-In Value:</label>
                <input type="text" id="tradeInValue" name="tradeInValue">
            </div>
            <div class="form-group">
                <label for="downPaymentAuto">Down Payment:</label>
                <input type="text" id="downPaymentAuto" name="downPaymentAuto">
            </div>
            <div class="form-group">
                <label for="salesTaxRate">Sales Tax Rate (%):</label>
                <input type="text" id="salesTaxRate" name="salesTaxRate">
            </div>
            <div class="form-group">
                <label for="fees">Fees:</label>
                <input type="text" id="fees" name="fees">
            </div>
            <button onclick="calculateAutoLoan()">Calculate Auto Loan</button>
            <div id="autoLoanResult"></div>
        </div>


    </div>
</main>
<br>
<br>
<br>
<footer>
    <p>Created By: Alyssa Lopez, Jonathan Garcia, Abel Abebe, Mustafa Shahzad </p>
</footer>

<script>
    function showMortgageForm() {
         document.getElementById("mortgageForm").style.display = "block";
         document.getElementById("studentLoanForm").style.display = "none";
         document.getElementById("autoLoanForm").style.display = "none";
     }

     function showStudentLoanForm() {
         document.getElementById("mortgageForm").style.display = "none";
         document.getElementById("studentLoanForm").style.display = "block";
         document.getElementById("autoLoanForm").style.display = "none";
     }

    function showAutoForm() {
         document.getElementById("autoLoanForm").style.display = "block";
         document.getElementById("studentLoanForm").style.display = "none";
         document.getElementById("mortgageForm").style.display = "none";


     }

    function calculateMortgage() {
        var homePrice = parseFloat(document.getElementById("homePrice").value);
        var downPayment = parseFloat(document.getElementById("downPayment").value);
        var loanTerm = parseInt(document.getElementById("loanTerm").value);
        var interestRate = parseFloat(document.getElementById("interestRate").value);
        console.log("Calculating mortgage...");


        // Check if any input value is NaN (not a number)
        if (isNaN(homePrice) || isNaN(downPayment) || isNaN(loanTerm) || isNaN(interestRate)) {
            alert("Please enter valid numeric values for all input fields.");
            return; // Exit the function if any input is invalid
        }

        var principal = homePrice - downPayment;
        var monthlyInterestRate = (interestRate / 100) / 12;
        var numberOfPayments = loanTerm * 12;
        var monthlyPayment = principal * monthlyInterestRate /
                (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));

        var formattedMonthlyPayment = monthlyPayment.toFixed(2);

        // Display the mortgage loan details in the result div
        var mortgageResult = document.getElementById("mortgageResult");
        mortgageResult.innerHTML = "<h2>Mortgage Loan Details</h2>" +
                                   "<p>Principal: $" + principal.toFixed(2) + "</p>" +
                                   "<p>Monthly Payment: $" + formattedMonthlyPayment + "</p>";
    }

    function calculateStudentLoan() {
        var loanAmount = parseFloat(document.getElementById("loanAmount").value);
        var loanTermYears = parseInt(document.getElementById("loanTermYears").value);
        var interestRate = parseFloat(document.getElementById("interestRate2").value);

        // Check if any input value is NaN (not a number)
        if (isNaN(loanAmount) || isNaN(loanTermYears) || isNaN(interestRate)) {
            alert("Please enter valid numeric values for all input fields.");
            return; // Exit the function if any input is invalid
        }

        var monthlyInterestRate = interestRate / 100 / 12;
        var numberOfPayments = loanTermYears * 12;

        // Calculate monthly payment using the formula for amortizing a loan
        var monthlyPayment = loanAmount * monthlyInterestRate / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));

        // Display the student loan details in the result div
        var studentLoanResult = document.getElementById("studentLoanResult");
        studentLoanResult.innerHTML = "<h2>Student Loan Details</h2>" +
                                       "<p>Loan Amount: $" + loanAmount.toFixed(2) + "</p>" +
                                       "<p>Loan Term (years): " + loanTermYears + "</p>" +
                                       "<p>Interest Rate: " + interestRate + "%</p>" +
                                       "<p>Monthly Payment: $" + monthlyPayment.toFixed(2) + "</p>";
    }

    function calculateAutoLoan() {
        var loanAmount = parseFloat(document.getElementById("loanAmountAuto").value);
        var loanTermYears = parseInt(document.getElementById("loanTermYearsAuto").value);
        var interestRate = parseFloat(document.getElementById("interestRateAuto").value);
        var tradeInValue = parseFloat(document.getElementById("tradeInValue").value);
        var downPayment = parseFloat(document.getElementById("downPaymentAuto").value);
        var salesTaxRate = parseFloat(document.getElementById("salesTaxRate").value);
        var fees = parseFloat(document.getElementById("fees").value);

        // Check if any input value is NaN (not a number)
        if (isNaN(loanAmount) || isNaN(loanTermYears) || isNaN(interestRate) ||
            isNaN(tradeInValue) || isNaN(downPayment) || isNaN(salesTaxRate) || isNaN(fees)) {
            alert("Please enter valid numeric values for all input fields.");
            return; // Exit the function if any input is invalid
        }

        // Calculate the total loan amount including sales tax and fees
        var totalLoanAmount = loanAmount - tradeInValue - downPayment + (loanAmount * salesTaxRate / 100) + fees;

        var monthlyInterestRate = interestRate / 100 / 12;
        var numberOfPayments = loanTermYears * 12;

        // Calculate monthly payment using the formula for amortizing a loan
        var monthlyPayment = totalLoanAmount * monthlyInterestRate / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));

        // Display the auto loan details in the result div
        var autoLoanResult = document.getElementById("autoLoanResult");
        autoLoanResult.innerHTML = "<h2>Auto Loan Details</h2>" +
                                   "<p>Total Loan Amount: $" + totalLoanAmount.toFixed(2) + "</p>" +
                                   "<p>Loan Term (years): " + loanTermYears + "</p>" +
                                   "<p>Interest Rate: " + interestRate + "%</p>" +
                                   "<p>Monthly Payment: $" + monthlyPayment.toFixed(2) + "</p>";
}


</script>

</body>
</html>
